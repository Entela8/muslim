<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Boussole num√©rique qui indique la qibla pour effectuer la pri√®re musulmane.</title>
	    <title>Une boussole num√©rique qui indique la direction de la pri√®re (qibla) pour le musulman afin d'effectuer sa pri√®re.</title>
			<link rel="icon" type="image/png" sizes="16x16"  href="https://muslim-alim.com/favicon.png">
    <style>
 	    * { margin: 0; padding: 0; box-sizing: border-box; }
              img{max-width:100%;}
        body { 
            font-family: 'Poppins', sans-serif;
background: #4b6cb7;  /* fallback for old browsers */
background: -webkit-linear-gradient(to right, #182848, #4b6cb7);  /* Chrome 10-25, Safari 5.1-6 */
background: linear-gradient(to right, #182848, #4b6cb7); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
 min-height: 100vh;
            padding: 20px;
            padding-bottom: 90px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page {
            padding: 20px;
        }

        .page-title {
            text-align: center;
            font-size: 24px;
            margin-bottom: 30px;
            color: white;
        }

     /* Menu de navigation */
        .nav-menu {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: rgba(26, 31, 60, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            align-items: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: rgba(255, 255, 255, 0.5);
            text-decoration: none;
            font-size: 12px;
            padding: 8px;
            transition: all 0.3s ease;
        }

        .nav-item.active {
            color: #00ff8c;
        }

        .nav-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .compass-container {
            width: 100%;
            max-width: 500px;
            margin: 20px auto;
            background: #333;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .compass-svg {
            width: 100%;
            height: auto;
            transition: transform 0.3s ease;
        }

        #error {
            color: #ff6b6b;
            margin: 10px;
            padding: 10px;
            border-radius: 5px;
            background: rgba(255, 107, 107, 0.1);
            display: none;
            text-align: center;
        }

        .info {
            background: #333;
            padding: 15px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 500px;
            text-align: center;
        }

        .instruction {
            color: #999;
            text-align: center;
            margin: 15px 0;
            font-size: 14px;
        }

        /* Pour laisser de l'espace pour le menu du bas */
        .content-wrapper {
            padding-bottom: 80px;
        }
    </style>
</head>
<body>
    <div class="container">
		<p align="center"><img src="https://muslim-alim.com/header.png"  alt="Muslim Alim (ÿπÿßŸÑŸÖ ŸÖÿ≥ŸÑŸÖ)"></p>
        <div class="content-wrapper">
            <h1 class="page-title">Boussole Qibla</h1>
            
            <div class="info">
                <p>Aiguille Rouge ‚Üí Nord<br>Mosqu√©e Verte ‚Üí Qibla</p>
            </div>

            <div class="compass-container">
                <!-- Ins√©rer ici le SVG de la boussole pr√©c√©dente -->
               <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
  <!-- [Garder tous les √©l√©ments pr√©c√©dents de la boussole jusqu'√† l'aiguille Qibla] -->
  <circle cx="250" cy="250" r="240" fill="none" stroke="#B8860B" stroke-width="4"/>
  <circle cx="250" cy="250" r="235" fill="none" stroke="#DAA520" stroke-width="2"/>
  <circle cx="250" cy="250" r="220" fill="#FDF5E6"/>
  <circle cx="250" cy="250" r="210" fill="none" stroke="#DAA520" stroke-width="1"/>
  <circle cx="250" cy="250" r="200" fill="none" stroke="#B8860B" stroke-width="2"/>
  <circle cx="250" cy="250" r="190" fill="none" stroke="#DAA520" stroke-width="1"/>
  <circle cx="250" cy="250" r="150" fill="none" stroke="#B8860B" stroke-width="2"/>
  
  <!-- Points cardinaux principaux -->
  <g font-family="Times New Roman" font-weight="bold">
    <text x="250" y="50" text-anchor="middle" font-size="24" fill="#B8860B">N</text>
    <path d="M250 70 L250 90" stroke="#B8860B" stroke-width="2"/>
    <text x="250" y="470" text-anchor="middle" font-size="24" fill="#B8860B">S</text>
    <path d="M250 410 L250 430" stroke="#B8860B" stroke-width="2"/>
    <text x="450" y="255" text-anchor="middle" font-size="24" fill="#B8860B">E</text>
    <path d="M410 250 L430 250" stroke="#B8860B" stroke-width="2"/>
    <text x="50" y="255" text-anchor="middle" font-size="24" fill="#B8860B">O</text>
    <path d="M70 250 L90 250" stroke="#B8860B" stroke-width="2"/>
  </g>
  
  <!-- Points cardinaux secondaires -->
  <g font-family="Times New Roman" font-size="18" fill="#DAA520">
    <text x="380" y="120" text-anchor="middle">NE</text>
    <text x="380" y="380" text-anchor="middle">SE</text>
    <text x="120" y="380" text-anchor="middle">SO</text>
    <text x="120" y="120" text-anchor="middle">NO</text>
  </g>

  <!-- Aiguille Nord -->
  <g transform="translate(250 250)">
    <path d="M0 -130 L15 0 L0 20 L-15 0 Z" fill="#B22222"/>
    <path d="M0 130 L15 0 L0 -20 L-15 0 Z" fill="#000000"/>
  </g>

  <!-- Nouvelle Aiguille Qibla (Mosqu√©e d√©taill√©e) -->
  <g transform="translate(250 250) rotate(45)"> <!-- Angle ajustable selon la direction -->
    <!-- Base de la mosqu√©e -->
    <path d="M-40 -70 L40 -70 L35 -60 L-35 -60 Z" fill="#1E6A3D"/>
    
    <!-- Corps principal -->
    <path d="M-35 -60 
             L35 -60 
             L32 -90
             L-32 -90 Z" 
          fill="#2E8B57"/>
    
    <!-- Grand d√¥me central -->
    <path d="M-25 -90 
             C-25 -110, -15 -120, 0 -120
             C15 -120, 25 -110, 25 -90
             L20 -85 L0 -95 L-20 -85 Z" 
          fill="#3CB371"/>
    <circle cx="0" cy="-105" r="5" fill="gold"/> <!-- Croissant simplifi√© -->
    
    <!-- Minarets -->
    <g>
      <!-- Minaret gauche -->
      <path d="M-32 -90 L-25 -90 L-25 -110 L-28 -115 L-32 -90" fill="#2E8B57"/>
      <circle cx="-27" cy="-115" r="3" fill="gold"/>
      
      <!-- Minaret droit -->
      <path d="M32 -90 L25 -90 L25 -110 L28 -115 L32 -90" fill="#2E8B57"/>
      <circle cx="27" cy="-115" r="3" fill="gold"/>
    </g>
    
    <!-- Portes et fen√™tres -->
    <path d="M-15 -75 L-8 -75 L-8 -65 L-15 -65 Z" fill="#1a472a"/>
    <path d="M8 -75 L15 -75 L15 -65 L8 -65 Z" fill="#1a472a"/>
    <path d="M-5 -80 L5 -80 L5 -70 L-5 -70 Z" fill="#1a472a"/>
    
    <!-- Tige de l'aiguille -->
    <path d="M0 -60 L8 0 L0 10 L-8 0 Z" fill="#2E8B57"/>
  </g>

  <!-- Point central -->
  <circle cx="250" cy="250" r="10" fill="#B8860B"/>
  <circle cx="250" cy="250" r="6" fill="#DAA520"/>
  <circle cx="250" cy="250" r="3" fill="#B8860B"/>
  
  <!-- Bordure d√©corative ext√©rieure -->
  {Array.from({length: 36}, (_, i) => {
    const angle = i * 10;
    const rad = angle * Math.PI / 180;
    return `
      <path d="M${250 + 238 * Math.sin(rad)} ${250 - 238 * Math.cos(rad)} 
               A 238 238 0 0 1 ${250 + 238 * Math.sin(rad + Math.PI/18)} ${250 - 238 * Math.cos(rad + Math.PI/18)}"
        stroke="#B8860B" stroke-width="4" fill="none"/>
    `;
  }).join('')}
</svg>
            </div>

            <div id="error"></div>

            <div class="instruction">
                Tenez votre appareil √† plat pour une meilleure pr√©cision
            </div>
        </div>
 

        <!-- Menu de navigation -->
    <nav class="nav-menu">
        <a href="https://muslim-alim.com/accueil.html" class="nav-item active" >
            <div class="nav-icon">üè†</div>
            Accueil
        </a>
        <a href="https://muslim-alim.com/coran.html" class="nav-item"  >
            <div class="nav-icon">üìñ</div>
            Coran
        </a>
        <a href="https://muslim-alim.com/dikr.html" class="nav-item"  >
            <div class="nav-icon">üìø</div>
            Dikr
        </a>
        <a href="https://muslim-alim.com/horaires-prieres.html" class="nav-item"  >
            <div class="nav-icon">üïå</div>
            Pri√®res
        </a>
		  <a href="https://muslim-alim.com/qibla-compass.html" class="nav-item"  >
            <div class="nav-icon">üïã</div>
            Qibla
        </a>
    </nav>
   </div>
    <script>
       // Fonction pour demander l'acc√®s aux capteurs sur iOS
async function requestDeviceOrientation() {
  if (typeof DeviceOrientationEvent !== 'undefined' && 
      typeof DeviceOrientationEvent.requestPermission === 'function') {
    try {
      // Demande de permission pour iOS 13+
      const permission = await DeviceOrientationEvent.requestPermission();
      if (permission === 'granted') {
        // Initialiser la boussole une fois la permission accord√©e
        initCompass();
      } else {
        document.getElementById('error').innerHTML = 
          'Permission refus√©e pour acc√©der √† la boussole. ' +
          'Veuillez autoriser l\'acc√®s dans les param√®tres de votre appareil.';
      }
    } catch (error) {
      document.getElementById('error').innerHTML = 
        'Erreur lors de l\'acc√®s √† la boussole : ' + error.message;
    }
  } else {
    // Pour les appareils non-iOS ou les versions ant√©rieures
    initCompass();
  }
}

// Fonction d'initialisation de la boussole
function initCompass() {
  window.addEventListener('deviceorientation', handleOrientation);
}

// Gestionnaire d'√©v√©nements pour l'orientation
function handleOrientation(event) {
  // Si alpha n'est pas disponible, l'appareil ne supporte pas la boussole
  if (event.alpha === null) {
    document.getElementById('error').innerHTML = 
      'Votre appareil ne dispose pas de boussole ou celle-ci n\'est pas accessible.';
    return;
  }

  // Mise √† jour de la rotation des aiguilles
  const compass = document.querySelector('.compass-container');
  const rotation = 360 - event.alpha; // Conversion en degr√©s positifs
  compass.style.transform = `rotate(${rotation}deg)`;
}

// Ajout du bouton de demande de permission pour iOS
document.addEventListener('DOMContentLoaded', function() {
  const container = document.querySelector('.compass-container');
  
  if (typeof DeviceOrientationEvent.requestPermission === 'function') {
    const button = document.createElement('button');
    button.innerHTML = 'Activer la boussole';
    button.className = 'permission-button';
    button.style.cssText = `
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 10px 20px;
      background-color: #2E8B57;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    `;
    button.onclick = requestDeviceOrientation;
    container.appendChild(button);
  } else {
    // Initialisation directe pour les appareils non-iOS
    initCompass();
  }
});
    </script>
</body>
</html>